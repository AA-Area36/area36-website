# Plan: Add Observability Config and Redeploy Worker

## Problem
The Cloudflare Worker for `area36-website` is hanging. To diagnose the issue, we need to enable observability logging and redeploy.

## Files to Modify
- `/Users/joshgreenwell/github/aa/area36-website/wrangler.jsonc`

## Steps

### 1. Add observability configuration to wrangler.jsonc
Add the following block to the existing configuration:

```json
"observability": {
  "logs": {
    "enabled": true,
    "invocation_logs": true
  },
  "traces": {
    "enabled": false
  }
}
```

The updated `wrangler.jsonc` will look like:
```jsonc
{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "area36-website",
  "main": ".open-next/worker.js",
  "compatibility_date": "2025-01-15",
  "compatibility_flags": ["nodejs_compat"],
  "observability": {
    "logs": {
      "enabled": true,
      "invocation_logs": true
    },
    "traces": {
      "enabled": false
    }
  },
  "assets": {
    "directory": ".open-next/assets",
    "binding": "ASSETS"
  },
  // ... rest of config unchanged
}
```

### 2. Redeploy the worker
Run the deploy command:
```bash
npm run deploy
```

This will:
1. Build the Next.js app with OpenNext (`opennextjs-cloudflare build`)
2. Deploy to Cloudflare Workers (`wrangler deploy`)

## Verification
1. Confirm deployment succeeds without errors
2. Check Cloudflare dashboard for worker logs to diagnose the hanging issue
3. Access the site and observe log output for any errors or stuck requests

## Next Steps (after deployment)
Once observability is enabled, review the logs in the Cloudflare dashboard to identify:
- What requests are causing the worker to hang
- Any errors or timeouts in the execution
- Patterns in the stuck requests
